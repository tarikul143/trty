function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var REQUIRED_FIELDS=["phone","name","address","postal_code","prefecture","city"],SEND_URL="/order/create_temporary/",NO_AUTOSAVE_FIELD="no_autosave_orders",TIMEOUT_PERIOD=3e3,request_sended=!1,sender=function(){saver.data.forEach(function(e){var r,t=!0;for(r in e.required){if(e.required.hasOwnProperty(r)&&!e.required[r].is_valid){t=!1;break}e.form[r]=e.required[r].value}t&&!request_sended&&(request_sended=!0,$.post(SEND_URL,e.form,function(e){"ok"!==e.status&&console.log("Error during creating temporary order, error: "+e.message)},"json"))})},timeout={start:function(){var e;return function(){clearTimeout(e),timeout.stop||(e=setTimeout(sender,TIMEOUT_PERIOD))}},stop:!1},timeoutResetter=timeout.start(),saver={data:[],listener:function(e){request_sended=!1;var t=e.target;saver.data.forEach(function(e,r){e.required[t.name]&&e.required[t.name].value!==t.value&&t.value!==e.required[t.name].placeholder&&(saver.data[r].required[t.name].value=t.value,saver.data[r].required[t.name].is_valid=!0,timeoutResetter())})},init:function(){var a=$("form");if(a.length)for(var e=0;e<a.length;e++){var r=function(e){for(var t=a[e],o={form:{},required:{}},r=0;r<t.elements.length;r++){var n=t.elements[r];if(n.name===NO_AUTOSAVE_FIELD&&1==n.value)return{v:void 0};o.form[n.name]=n.value}o.form.user_agent=navigator.userAgent,REQUIRED_FIELDS.forEach(function(e){var r=t.elements[e];void 0!==r&&"none"!==r.style.display&&"hidden"!==r.type&&($(r).on("keyup",saver.listener),o.required[e]={value:r.value,is_valid:!1,placeholder:"undefined"!==r.attributes.placeholder?"":r.attributes.placeholder.value})}),o.user_agent=navigator.userAgent,saver.data.push(o)}(e);if("object"===_typeof(r))return r.v}}};$(document).ready(function(){saver.init(),$("form button, form input[type=submit]").click(function(){timeout.stop=!0,timeoutResetter()})});